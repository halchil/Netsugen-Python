

## 1. 準備

### 1.1 仮想環境とパッケージインストール

```bash
python -m venv venv
source venv/bin/activate  # Windowsの場合は venv\Scripts\activate
pip install pandas numpy scipy matplotlib seaborn
```

---

## 2. サンプルデータの作成

```python
import numpy as np
import pandas as pd
np.random.seed(42)

data = pd.DataFrame({
    'group': np.random.choice(['A', 'B'], 100),
    'score': np.concatenate([
        np.random.normal(70, 8, 50),  # group A
        np.random.normal(75, 10, 50)  # group B
    ]),
    'age': np.random.randint(20, 60, 100),
    'sales': np.random.normal(500, 80, 100)
})
print(data.head())
```

---

## 3. 基本統計量の計算

```python
print('平均:', data['score'].mean())
print('標準偏差:', data['score'].std())
print('中央値:', data['score'].median())
print('最頻値:', data['score'].mode()[0])
```

---

## 4. グループごとの統計量

```python
group_stats = data.groupby('group')['score'].agg(['mean', 'std', 'median', 'count'])
print(group_stats)
```

---

## 5. 相関係数と散布図

```python
corr = data[['score', 'age', 'sales']].corr()
print('相関行列:\n', corr)

import seaborn as sns
import matplotlib.pyplot as plt
sns.pairplot(data[['score', 'age', 'sales']])
plt.suptitle('ペアプロットによる相関可視化', y=1.02)
plt.show()
```

---

## 6. 回帰分析（単回帰）

```python
from scipy import stats
x = data['age']
y = data['sales']
slope, intercept, r_value, p_value, std_err = stats.linregress(x, y)
print(f'回帰直線: sales = {slope:.2f} * age + {intercept:.2f}')
print(f'決定係数R^2: {r_value**2:.3f}, p値: {p_value:.3f}')

plt.scatter(x, y, alpha=0.7)
plt.plot(x, slope * x + intercept, color='red')
plt.title('年齢と売上の回帰分析')
plt.xlabel('年齢')
plt.ylabel('売上')
plt.show()
```

---

## 7. 仮説検定

### 7.1 t検定（2群の平均差）

```python
from scipy.stats import ttest_ind
groupA = data[data['group'] == 'A']['score']
groupB = data[data['group'] == 'B']['score']
t_stat, p_val = ttest_ind(groupA, groupB)
print(f't検定: t値={t_stat:.2f}, p値={p_val:.4f}')
if p_val < 0.05:
    print('有意差あり（帰無仮説棄却）')
else:
    print('有意差なし（帰無仮説採択）')
```

### 7.2 カイ二乗検定（カテゴリの独立性）

```python
from scipy.stats import chi2_contingency
# 年齢をカテゴリ化
bins = [19, 29, 39, 49, 59, 69]
data['age_cat'] = pd.cut(data['age'], bins)
crosstab = pd.crosstab(data['group'], data['age_cat'])
chi2, p, dof, expected = chi2_contingency(crosstab)
print(f'カイ二乗検定: カイ二乗値={chi2:.2f}, p値={p:.4f}')
```

---

## 8. まとめ

- pandas, scipy, seabornを使い、実データで統計分析を実践しました。
- 平均・分散・相関・回帰・仮説検定の一連の流れを体験しました。